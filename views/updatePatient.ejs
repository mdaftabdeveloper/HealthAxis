<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Patient Profile</title>
    <link rel="stylesheet" href="/css/updatePatient.css" />
    <script src="https://unpkg.com/feather-icons"></script>
</head>

<body>
    <header>
        <h2>HealthAxis Hospital</h2>
    </header>

    <div class="container">
        <h1>Edit Patient Profile</h1>
        <form id="editForm" enctype="multipart/form-data" method="post" action="/update/patient/<%= patient._id %>">
            <!-- Profile Picture -->
            <div class="photo-section">
                <img id="photoPreview" src="<%= patient.capturedPhoto %>" alt="Profile Photo" />
                <label for="capturedPhoto" class="upload-btn">Change Photo</label>
                <input type="file" id="capturedPhoto" name="capturedPhoto" accept="image/*" hidden />
            </div>

            <!-- Editable Fields -->
            <div class="form-grid">
                <div class="field">
                    <label>Full Name</label>
                    <div class="input-group">
                        <input type="text" id="fullName" name="fullName" value="<%= patient.fullName %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('fullName')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Email</label>
                    <div class="input-group">
                        <input type="email" id="email" name="email" value="<%= patient.email %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="startEmailVerification()"></i>
                    </div>
                </div>

                <div class="field">
                    <label>DOB</label>
                    <div class="input-group">
                        <input type="date" id="dob" name="dob"
                            value="<%= new Date(patient.dob).toISOString().split('T')[0] %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('dob')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Age</label>
                    <div class="input-group">
                        <input type="number" id="age" name="age" value="<%= patient.age %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('age')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Gender</label>
                    <div class="input-group">
                        <select id="gender" name="gender" disabled>
                            <option <%=patient.gender==='Male' ? 'selected' : '' %>>Male</option>
                            <option <%=patient.gender==='Female' ? 'selected' : '' %>>Female</option>
                            <option <%=patient.gender==='Other' ? 'selected' : '' %>>Other</option>
                        </select>
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('gender')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Mobile</label>
                    <div class="input-group">
                        <input type="text" id="mobile" name="mobile" value="<%= patient.mobile %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('mobile')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Aadhar</label>
                    <div class="input-group">
                        <input type="text" id="aadhar" name="aadhar" value="<%= patient.aadhar %>" disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('aadhar')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Referred By</label>
                    <div class="input-group">
                        <select id="referredBy" name="referredBy" disabled>
                            <option <%=patient.referredBy==='Dr. J. Hoda (General Physician, M.D.)' ? 'selected' : '' %>
                                >Dr. J. Hoda (General Physician, M.D.)</option>
                            <option <%=patient.referredBy==='Dr. V. Kumar (Orthopaedics Surgeon M.B.B.S. & M.S.)'
                                ? 'selected' : '' %>>Dr. V. Kumar (Orthopaedics Surgeon M.B.B.S. & M.S.)</option>
                            <option <%=patient.gender==='Dr. Anwar Hussain (B.A.M.S)' ? 'selected' : '' %>>Dr. Anwar
                                Hussain (B.A.M.S.)</option>
                        </select>
                        <!-- <input type="text" id="referredBy" name="referredBy" value="<%= patient.referredBy %>"
                            disabled /> -->
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('referredBy')"></i>
                    </div>
                </div>

                <div class="field">
                    <label>Password</label>
                    <div class="input-group">
                        <input type="password" id="password" name="password" placeholder="Enter new password"
                            disabled />
                        <i data-feather="edit-2" class="edit-icon" onclick="enableField('password')"></i>
                    </div>
                </div>
            </div>

            <button type="submit" class="save-btn">Save Changes</button>
        </form>
    </div>

    <footer>
        <p>Â© 2016 HealthAxis Hospital | All Rights Reserved</p>
    </footer>

    <script>feather.replace();</script>
    <!-- <script src="/js/updatePatient.js"></script> -->
</body>

</html>